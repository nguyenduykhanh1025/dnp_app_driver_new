<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="renderer" content="webkit" />
    <title>ePort Portal</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link th:href="@{favicon.ico}" rel="stylesheet" />
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/css/jquery.contextMenu.min.css}" rel="stylesheet" />
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet" />
    <link th:href="@{/css/animate.css}" rel="stylesheet" />
    <link th:href="@{/css/style.css}" rel="stylesheet" />
    <link th:href="@{/css/skins.css}" rel="stylesheet" />
    <link th:href="@{/eport/css/eport.css?v=4.2.0}" rel="stylesheet" />
  </head>
  <body
    class="fixed-sidebar full-height-layout gray-bg"
    style="overflow: hidden;"
  >
    <div id="wrapper">
      <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="nav-close">
          <i class="fa fa-times-circle"></i>
        </div>
        <a th:href="@{/index}">
          <li class="logo hidden-xs">
            <span class="logo-lg">ePORT</span>
          </li>
        </a>
        <div class="sidebar-collapse">
          <ul class="nav" id="side-menu">
            <li>
              <a href="#"
                ><i class="fa fa-home"></i> <span class="nav-label">Home</span>
                <span class="fa arrow"></span
              ></a>
              <ul class="nav nav-second-level">
                <li>
                  <a class="menuItem" th:href="@{/edi/index}">Đọc file EDI</a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-home"></i> <span class="nav-label">Home</span> <span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
						<li><a href="/carrier/do">Equipment DO Manage</a></li>
                    </ul>
                </li>
              </ul>
            </li>
            <li th:each="menu : ${menus}">
              <a
                th:class="@{${menu.url != '' && menu.url != '#'} ? ${menu.target}}"
                th:href="@{${menu.url == ''} ? |#| : ${menu.url}}"
              >
                <i class="fa fa-bar-chart-o" th:class="${menu.icon}"></i>
                <span class="nav-label" th:text="${menu.menuName}"
                  >Top Menu</span
                >
                <span
                  th:class="${menu.url == '' || menu.url == '#'} ? |fa arrow|"
                ></span>
              </a>
              <ul class="nav nav-second-level collapse">
                <li th:each="cmenu : ${menu.children}">
                  <a
                    th:if="${#lists.isEmpty(cmenu.children)}"
                    th:class="${cmenu.target == ''} ? |menuItem| : ${cmenu.target}"
                    th:utext="${cmenu.menuName}"
                    th:href="@{${cmenu.url}}"
                    >2nd Menu</a
                  >
                  <a th:if="${not #lists.isEmpty(cmenu.children)}" href="#"
                    >[[${cmenu.menuName}]]<span class="fa arrow"></span
                  ></a>
                  <ul
                    th:if="${not #lists.isEmpty(cmenu.children)}"
                    class="nav nav-third-level"
                  >
                    <li th:each="emenu : ${cmenu.children}">
                      <a
                        th:if="${#lists.isEmpty(emenu.children)}"
                        th:class="${emenu.target == ''} ? |menuItem| : ${emenu.target}"
                        th:text="${emenu.menuName}"
                        th:href="@{${emenu.url}}"
                        >3rd Menu</a
                      >
                      <a th:if="${not #lists.isEmpty(emenu.children)}" href="#"
                        >[[${emenu.menuName}]]<span class="fa arrow"></span
                      ></a>
                      <ul
                        th:if="${not #lists.isEmpty(emenu.children)}"
                        class="nav nav-four-level"
                      >
                        <li th:each="fmenu : ${emenu.children}">
                          <a
                            th:if="${#lists.isEmpty(fmenu.children)}"
                            th:class="${fmenu.target == ''} ? |menuItem| : ${fmenu.target}"
                            th:text="${fmenu.menuName}"
                            th:href="@{${fmenu.url}}"
                            >四级菜单</a
                          >
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <!--左侧导航结束-->

      <!--右侧部分开始-->
      <div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row border-bottom">
          <nav
            class="navbar navbar-static-top"
            role="navigation"
            style="margin-bottom: 0;"
          >
            <div class="navbar-header">
              <a
                class="navbar-minimalize minimalize-styl-2"
                style="color: #fff;"
                href="#"
                title="Collapse"
              >
                <i class="fa fa-bars"></i>
              </a>
            </div>
            <ul class="nav navbar-top-links navbar-right welcome-message">
              <li>
                <a title="全屏显示" href="javascript:void(0)" id="fullScreen"
                  ><i class="fa fa-arrows-alt"></i> Full Screen</a
                >
              </li>
              <li class="dropdown user-menu">
                <a
                  href="javascript:void(0)"
                  class="dropdown-toggle"
                  data-hover="dropdown"
                >
                  <span class="hidden-xs"
                    >[[${#strings.defaultString(user.email, '-')}]]</span
                  >
                </a>
                <ul class="dropdown-menu">
                  <li class="mt5">
                    <a th:href="@{/user/profile}" class="menuItem">
                      <i class="fa fa-user"></i> Profile</a
                    >
                  </li>
                  <li>
                    <a onclick="resetPwd()">
                      <i class="fa fa-key"></i> Change Password</a
                    >
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a th:href="@{logout}">
                      <i class="fa fa-sign-out"></i> Logout</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
        <div class="row content-tabs">
          <button class="roll-nav roll-left tabLeft">
            <i class="fa fa-backward"></i>
          </button>
          <nav class="page-tabs menuTabs">
            <div class="page-tabs-content">
              <a href="javascript:;" class="active menuTab" data-id="/main"
                >Home</a
              >
            </div>
          </nav>
          <button class="roll-nav roll-right tabRight">
            <i class="fa fa-forward"></i>
          </button>
          <a href="javascript:void(0);" class="roll-nav roll-right tabReload"
            ><i class="fa fa-refresh"></i>
          </a>
        </div>

        <a
          id="ax_close_max"
          class="ax_close_max"
          href="#"
          title="Close Full Screen"
        >
          <i class="fa fa-times-circle-o"></i>
        </a>

        <div class="row mainContent" id="content-main">
          <iframe
            class="eport_iframe"
            name="iframe0"
            width="100%"
            height="100%"
            data-id="/main"
            th:src="@{/main}"
            frameborder="0"
            seamless
          ></iframe>
        </div>
        <div class="footer">
          <div class="pull-right">Copyright IRTech © [[${copyrightYear}]]</div>
        </div>
      </div>
      <!--右侧部分结束-->
    </div>
    <!-- 全局js -->
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
    <script
      th:src="@{/js/plugins/slimscroll/jquery.slimscroll.min.js}"
    ></script>
    <script th:src="@{/js/jquery.contextMenu.min.js}"></script>
    <script th:src="@{/ajax/libs/blockUI/jquery.blockUI.js}"></script>
    <script th:src="@{/ajax/libs/layer/layer.min.js}"></script>
    <script th:src="@{/eport/js/eport.js?v=4.2.0}"></script>
    <script th:src="@{/eport/js/common.js?v=4.2.0}"></script>
    <script th:src="@{/eport/index.js}"></script>
    <script th:src="@{/ajax/libs/fullscreen/jquery.fullscreen.js}"></script>
    <script th:inline="javascript">
      var ctx = [[@{/}]];
      var skin = storage.get("skin");
      var mode = "history";
      var historyPath = storage.get("historyPath");

      if($.common.isNotEmpty(skin)){
      	$("body").addClass(skin.split('|')[0]);
      	$("body").addClass(skin.split('|')[1]);
      } else {
      	$("body").addClass([[${sideTheme}]]);
      	$("body").addClass([[${skinName}]]);
      }

      function resetPwd() {
          var url = ctx + 'user/profile/resetPwd';
          $.modal.open("Reset Password", url, '770', '380');
      }

      function switchSkin() {
          layer.open({
      		type : 2,
      		shadeClose : true,
      		title : "Change Theme",
      		area : ["530px", "386px"],
      		content : [ctx + "switchSkin", 'no']
      	})
      }

      function applyPath(url) {
      	$('a[href$="' + decodeURI(url) + '"]').click();
          $('a[href$="' + url + '"]').parent("li").addClass("selected").parents("li :not(.user-panel)").addClass("active").end().parents("ul").addClass("in");
      }

      $(function() {
      	if($.common.equals("history", mode) && window.performance.navigation.type == 1) {
      		var url = storage.get('publicPath');
      	    if ($.common.isNotEmpty(url)) {
      	    	applyPath(url);
      	    }
      	} else {
      		var hash = location.hash;
      	    if ($.common.isNotEmpty(hash)) {
      	        var url = hash.substring(1, hash.length);
      	        applyPath(url);
      	    }
      	}
      });
    </script>
  </body>
</html>
